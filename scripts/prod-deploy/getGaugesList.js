//const ether = require('@openzeppelin/test-helpers/src/ether');
const ether = require('@openzeppelin/test-helpers/src/ether');
const { ethers  } = require('hardhat');

function sleep(ms) {
  return new Promise((resolve) => {
    setTimeout(resolve, ms);
  });
}

let arr = [
    '0xD9AF4c9a7E7C472FaD93132E0952b0DcFFBcA7F1',
    '0xd8d9CFaFefb78c9b2ffF81805beF180C5823D949',
    '0x273f8Fe9516458986d8710264a529a0a4a1517d4',
    '0x10eF8C5C88811e881ba60140cCC8D5eEc6a26cF8',
    '0xCc66188C25491a9e74Dd98152d27CEF91A078341',
    '0xf08392D40DFe775792085d602351d7DEFe4C0727',
    '0xb891e98E549B9a350D818ba4067Ccd1C6719Dd6B',
    '0xeDf2b72BdAa81f5D0678861E0d0bF6cfBe4e292E',
    '0x8e68e4Cc432F6b96EE1DFFDed684c6eb465CE6A0',
    '0xa9706dB53a25c004Ff95201eEFbE454434321703',
    '0xDAe249C5446a794be6DFD80094F09ab8405Dca97',
    '0x0C4B24E02acCDE3Ddd5beFa5B12de9846B4Ab3BE',
    '0x5Ce4a22cF7aBd895D7839B76673fde87D2AE0500',
    '0x028D384EE39c10eAEDDb8C6c8dc230215742e666',
    '0x2198713815e3356d59F5c58Be2d78615C3fEfe5C',
    '0x907d90497cE9EbE2611155715Fb922152496e26a',
    '0xD6882f616Cb7AC77a0dc7Ede60D337F21DaB2648',
    '0x8EF6b9bB782928D5502836493c6759390D6367a3',
    '0xCb3056D55A99ee68D7D2F82d96829191D063beeF',
    '0xD5f9EA9E1536967E7a4F028FC7Ceeaa6db58372c',
    '0x05b5136232c82E0EeAFD835947d6Dc2c087aAC1a',
    '0xDA37C098512550C159BA637385CE418E2A40fb0b',
    '0x4ffb56016E0Ac939A5043e6Ee8B929c4561FC7aa',
    '0x26AF94E108928364B11815608831f504c72CFbeF',
    '0x68410687BFD125664F6a46F4914268E9efBE5253',
    '0x2b75Cf3C8476C3E1EaaBd5A050948771A8D315e4',
    '0xb6E87079B0134200Aab4d04C180F287f15160FCD',
    '0xCD71C22C015baB634c741e305f13B8b5D3Ee1bed',
    '0x82CFf2990EDa94DC80F2515e1C365c3a32ee3ce7',
    '0x3e75c52fBbEF086dF5849dFB57094eDA000F11aa',
    '0x5AFeBf41853dDB46F22eF6f69DF981A1eBbEDb57',
    '0x347e345c5fDd4575fB3DB85380FCffAD64f3c601',
    '0xbD1Daa1084Ee12afa09AD4344e077AA4c2836536',
    '0x903cdd4f4490D27414A24FDB7D3020170F89e244',
    '0x16ab4d14eb7A998443Eda477EdaAb9202ae4957b',
    '0x20Ee1b3d2Aec2B8edE2386bFD1514e51A5580f90',
    '0x46868F00e16f35363a0e9E3758B2Ee38e148674A',
    '0x4018068ABf3758747DA89F82a690FDC46917e0F4',
    '0xf1fBA6df5f085a3711247E61f83B56413c3CCf64',
    '0x29b4a1a2DD7B6214c957c896c088CF35c4A9F173',
    '0xe2702216Aae358Ee73C86B2f60E07601b0218174',
    '0x89D55Ce34a9DCF98DE38A5fbaeEdD0279FB0Ef46',
    '0xa2fa60905ed9678c240D2F54C6E49C9E0Cd84558',
    '0x2C1B710d3aAaE65e3161A53eBBA2ae44AA172d48',
    '0x978A20Be8D1AFa1D1134d3711829290723927222',
    '0xa68C3abA6234D180BD811bAfAca69a145721f53A',
    '0xfFeC070F30a74a5D2618916aCE60e6c2fD39Ab51',
    '0xd9cd6F1351B7d8acf6Ba12ceDB0aebEB28BE36aF',
    '0xa8B7fe69B8812833b405744F547a26688a7929Ae',
    '0x4aA4c365277739bbD7eB2d35955F8A8Bb5AE7E2a',
    '0x60B254858651a2538638590FE9847Fb56ABD2112',
    '0x5AAa88B4D451312ef43D78ff667308a30873708f',
    '0x1Abf9b1e95561810AfcB22BF58144129bB96935F',
    '0xa44b6B13A5B532192b70AA3BBC7E4551D689C387',
    '0xfb0d002aBd1CBbEB33286caCdb0d468a588E1a4E',
    '0xa3a2444dD03a8e6Ba210C3ccFb33c7bB6d1795cA',
    '0x4CE02eE7feFcaF51db86b1284Ec78778CF8D0c22',
    '0xFdd5C95F1F6d4DF41b76Bd80a1643c5EcD2d0301',
    '0xBc7b6268FD3d41c8Ea1ce03fc239BFBD58d0a2bD',
    '0x72DA5f09939Fb8B7903122D9CCAa7bdbeEd41996',
    '0x5588B445fd4e28F9b7f24Ad98bf43d30CfCA21D5',
    '0xca6c3f9833091493F818b299a1fFC8E4E68511b1',
    '0xA257dc989F445967A7b142e0d0C111e070df6966',
    '0xfD04C1e85d54eE0BBca9D2BeA9FD0D2366c965eC',
    '0xeaEDdC8719a7e95F6353f52782A254FBf7BAFB3D',
    '0x1bFdf03A56b5420fd3ce64185862CAC6AeC03244',
    '0xd2d47d4Ab133683b8B7b33c472176eabcD0D6388',
    '0x3570FdEA187Cf23f6cDA4632229e06A5514519Bd',
    '0x33ef672C7B30b84B47a38e8C8E0e2f645b82Eb2C',
    '0x19E99d99Cd91153B0F690804984839bA9f1823B7',
    '0xb80c377223C56110c8B9711A86193140C6816a70',
    '0x123CD1F08f5866f5f213158f4e297E50fC77897f',
    '0xf884E65Eb897B945E5C74ae06f8F6b5c2AE01a46',
    '0x47A9cdDC86f93d378203B8EEa932339B09614f38',
    '0x50c1178ED3eA8710f5346D96c46208DCe4D75575',
    '0x6575A82f2BaFA63a395de8ca4497e1138e0A0A00',
    '0x7806e788403f9d9762246d6A4aFde63daC42234a',
    '0xFb9C9Da12E35825dd03C2E1cDC5D4F537C57abaA',
    '0xAc43852380F337bF396b7Ad25B4676D24038F583',
    '0xFdc0800D0565c21e958a39E16F9892A688603304',
    '0x88495Cead7efe02AE562E3E68cA3e550DdDc0e86',
    '0xf4B4E9ba85892aA61BB957fe8e11E6cDCe9f1AFC',
    '0x8a0AE2F44ABd2978DC8A33E52D807B99ed285Fa6'
  ]

async function main () {
    //const signer = await ethers.getImpersonatedSigner("0xc8949dbaf261365083a4b46ab683BaE1C9273203");
    const signer = ethers.provider.getSigner();
    
    feeHandler = await ethers.getContractAt("ProtocolFeeHandler", "0x5A39D3fF53844a148d0040738F5D57c7eC0398db", signer);
    voter = await ethers.getContractAt("VoterV3", "0xAcCbA5e852AB85E5E3a84bc8E36795bD8cEC5C73", signer);
    gaugeFactoryV2CL = await ethers.getContractAt("GaugeFactoryV2_CL", "0x9AE721D3Bae22FA42AA11eD7E4AB0b9b7263DE52", signer);
    
    // const length = await voter.length();

    // for (let num of Array(Number(length)).keys()){
    //     pool = await voter.pools(num);
    //     gauge = await voter.gauges(pool);
    //     arr.push(gauge);
    // }

    // console.log(arr);
    
    for(let gauge of arr){
        console.log('starting for', gauge)
        const zz = await ethers.getContractAt("GaugeV2_CL", gauge, signer);
        const feeVaultAddress = await zz.feeVault()
        console.log('feeVaultAddress for', gauge, feeVaultAddress)
        const feeVault = await ethers.getContractAt("CLFeesVault", feeVaultAddress, signer);
        const tx = await feeVault.setGammaShare(1731);
        await tx.wait();
        await sleep(2500);
        console.log('done for', gauge)
    }
   
    console.log('done')

}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
